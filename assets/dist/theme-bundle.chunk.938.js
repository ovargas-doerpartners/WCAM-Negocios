"use strict";(self.webpackChunkpapathemes_supermarket=self.webpackChunkpapathemes_supermarket||[]).push([[938],{82938:(e,t,r)=>{r.r(t),r.d(t,{default:()=>C});var o=r(7309),a=r.n(o),n=r(40860),i=r.n(n),d=r(98368),l=r(41582),s=r(27122),c=r(70887),u=r(36007),m=r(96609),p=r(71779),f=r(33270),v=r.n(f),h=r(57655),b=r.n(h),y=r(87838),g=r(9096),x=r(33270);function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}var C=function(e){function t(t){var r;return(r=e.call(this,t)||this).validationDictionary=(0,p.i)(t),r.$state=x('[data-field-type="State"]'),r.$body=x("body"),r}var r,o;o=e,(r=t).prototype=Object.create(o.prototype),r.prototype.constructor=r,_(r,o);var n=t.prototype;return n.onReady=function(){var e=(0,m.J6)("form[data-edit-account-form]"),t=(0,m.J6)("form[data-address-form]"),r=(0,m.J6)("form[data-inbox-form]"),o=(0,m.J6)("[data-account-return-form]"),a=(0,m.J6)("form[data-payment-method-form]"),n=(0,m.J6)("[data-account-reorder-form]"),i=x("[data-print-invoice]"),d=window.BigCommerce;if(this.passwordRequirements=this.context.passwordRequirements,s.default.load(this.context),e.length&&(this.registerEditAccountValidation(e),this.$state.is("input")&&(0,m.VJ)(this.$state)),i.length&&i.on("click",function(){var e=window.screen.availWidth/2-450,t=window.screen.availHeight/2-320,r=i.data("printInvoice");window.open(r,"orderInvoice","width=900,height=650,left="+e+",top="+t+",scrollbars=1")}),t.length&&(this.initAddressFormValidation(t),this.$state.is("input")&&(0,m.VJ)(this.$state)),r.length&&this.registerInboxValidation(r),o.length&&this.initAccountReturnFormValidation(o),a.length&&this.initPaymentMethodFormValidation(a),n.length&&this.initReorderForm(n),d&&d.renderAccountPayments){var l=this.context,c=l.countries,u=l.paymentsUrl,p=l.storeHash,f=l.storeLocale,v=l.vaultToken,h=l.shopperId,b=l.customerEmail,g=l.providerId,_=l.currencyCode,C=l.paymentMethodsUrl,k=l.paymentProviderInitializationData,w=l.themeSettings;d.renderAccountPayments({styles:{inputBase:{color:w["input-font-color"],borderColor:w["input-border-color"]},inputValidationError:{color:w["color-error"],borderColor:w["color-error"]},inputValidationSuccess:{color:w["color-success"],borderColor:w["color-success"]},submitButton:{color:w["button--primary-color"],backgroundColor:w["button--primary-backgroundColor"],borderColor:w["button--primary-backgroundColor"],"&:hover":{color:w["button--primary-colorHover"],backgroundColor:w["button--primary-backgroundColorHover"],borderColor:w["button--primary-backgroundColorHover"]},"&:active":{color:w["button--primary-colorHover"],backgroundColor:w["button--primary-backgroundColorHover"],borderColor:w["button--primary-backgroundColorHover"]},"&[disabled]":{backgroundColor:w["button--disabled-backgroundColor"],borderColor:w["button--disabled-borderColor"],color:w["button--disabled-color"],cursor:"not-allowed"}},cancelButton:{color:w["button--default-color"],backgroundColor:"transparent",borderColor:w["button--default-borderColor"],"&:hover":{color:w["button--default-colorHover"],backgroundColor:"transparent",borderColor:w["button--default-borderColorHover"]},"&:active":{color:w["button--default-colorHover"],backgroundColor:"transparent",borderColor:w["button--default-borderColorHover"]}},label:{color:w["form-label-font-color"]},validationError:{color:w["color-error"]},heading:{color:w["color-textHeading"]}},storeContextData:{countries:c,paymentsUrl:u,storeHash:p,storeLocale:f,vaultToken:v,shopperId:h,customerEmail:b,providerId:g,currencyCode:_,paymentMethodsUrl:C,paymentProviderInitializationData:k},errorHandler:y.ji})}this.bindDeleteAddress(),this.bindDeletePaymentMethod()},n.bindDeleteAddress=function(){x("[data-delete-address]").on("submit",function(e){var t=x(e.currentTarget).data("deleteAddress");window.confirm(t)||e.preventDefault()})},n.bindDeletePaymentMethod=function(){x("[data-delete-payment-method]").on("submit",function(e){var t=x(e.currentTarget).data("deletePaymentMethod");window.confirm(t)||e.preventDefault()})},n.initReorderForm=function(e){var t=this;e.on("submit",function(r){var o=x(".account-listItem .form-checkbox:checked"),a=!1;e.find('[name^="reorderitem"]').remove(),o.each(function(t,r){var o=x(r).val(),n=x("<input>",{type:"hidden",name:"reorderitem["+o+"]",value:"1"});a=!0,e.append(n)}),a||(r.preventDefault(),g.A.fire({text:t.context.selectItem,icon:"error"}))})},n.initAddressFormValidation=function(e){var t,r=this,o=(0,c.A)(e,this.context),a=x('form[data-address-form] [data-field-type="State"]'),n=(0,l.A)({submit:'form[data-address-form] input[type="submit"]',tap:m.dN});n.add(o),a&&(0,u.A)(a,this.context,function(e,o){if(e)throw new Error(e);var i=x(o);"undefined"!==n.getStatus(a)&&n.remove(a),t&&n.remove(t),i.is("select")?(t=o,m.k0.setStateCountryValidation(n,o,r.validationDictionary.field_not_blank)):m.k0.cleanUpStateValidation(o)}),e.on("submit",function(e){n.performCheck(),n.areAll("valid")||e.preventDefault()})},n.initAccountReturnFormValidation=function(e){var t=e.data("accountReturnFormError");e.on("submit",function(r){var o=!1;return x('[name^="return_qty"]',e).each(function(e,t){if(0!==parseInt(x(t).val(),10))return o=!0,!0}),!!o||(g.A.fire({text:t,icon:"error"}),r.preventDefault())})},n.initPaymentMethodFormValidation=function(e){var t=this;e.find("#first_name.form-field").attr("data-validation",'{ "type": "singleline", "label": "'+this.context.firstNameLabel+'", "required": true, "maxlength": 0 }'),e.find("#last_name.form-field").attr("data-validation",'{ "type": "singleline", "label": "'+this.context.lastNameLabel+'", "required": true, "maxlength": 0 }'),e.find("#company.form-field").attr("data-validation",'{ "type": "singleline", "label": "'+this.context.companyLabel+'", "required": false, "maxlength": 0 }'),e.find("#phone.form-field").attr("data-validation",'{ "type": "singleline", "label": "'+this.context.phoneLabel+'", "required": false, "maxlength": 0 }'),e.find("#address1.form-field").attr("data-validation",'{ "type": "singleline", "label": "'+this.context.address1Label+'", "required": true, "maxlength": 0 }'),e.find("#address2.form-field").attr("data-validation",'{ "type": "singleline", "label": "'+this.context.address2Label+'", "required": false, "maxlength": 0 }'),e.find("#city.form-field").attr("data-validation",'{ "type": "singleline", "label": "'+this.context.cityLabel+'", "required": true, "maxlength": 0 }'),e.find("#country.form-field").attr("data-validation",'{ "type": "singleselect", "label": "'+this.context.countryLabel+'", "required": true, "prefix": "'+this.context.chooseCountryLabel+'" }'),e.find("#state.form-field").attr("data-validation",'{ "type": "singleline", "label": "'+this.context.stateLabel+'", "required": true, "maxlength": 0 }'),e.find("#postal_code.form-field").attr("data-validation",'{ "type": "singleline", "label": "'+this.context.postalCodeLabel+'", "required": true, "maxlength": 0 }');var r,o,n,d,s,p=(0,c.A)(e,this.context),f="form[data-payment-method-form]",h=(0,l.A)({submit:f+' input[type="submit"]',tap:m.dN}),y=x(f+' [data-field-type="State"]');(0,u.A)(y,this.context,function(e,o){if(e)throw new Error(e);var a=x(o);"undefined"!==h.getStatus(y)&&h.remove(y),r&&h.remove(r),a.is("select")?(r=o,m.k0.setStateCountryValidation(h,o,t.validationDictionary.field_not_blank)):m.k0.cleanUpStateValidation(o)}),x(f+' input[name="credit_card_number"]').on("keyup",function(e){var t;t=e.target.value,(o=b().card.type(b().card.parse(t),!0))?x(f+' img[alt="'+o+'"]').siblings().css("opacity",".2"):x(f+" img").css("opacity","1")}),n=h,d=f+' input[name="credit_card_number"]',s=this.context.creditCardNumber,d&&n.add({selector:d,validate:function(e,t){e(t.length&&b().card.isValid(b().card.parse(t)))},errorMessage:s}),function(e,t,r){t&&e.add({selector:t,validate:function(e,t){var r=t.split("/"),o=t.length&&/^(0[1-9]|1[0-2])\/([0-9]{2})$/.test(t);e(o=o&&!b().expiration.isPast(b().expiration.month.parse(r[0]),b().expiration.year.parse(r[1],!0)))},errorMessage:r})}(h,f+' input[name="expiration"]',this.context.expiration),function(e,t,r){t&&e.add({selector:t,validate:function(e,t){e(!!t.length)},errorMessage:r})}(h,f+' input[name="name_on_card"]',this.context.nameOnCard),function(e,t,r,o){t&&e.add({selector:t,validate:function(e,t){var r="function"==typeof o?o():o;e(t.length&&b().cvc.isValid(t,r))},errorMessage:r})}(h,f+' input[name="cvv"]',this.context.cvv,function(){return o}),function(e){e&&v()(e).on("keyup",function(e){var t=e.target;t.value=b().card.format(b().card.parse(t.value))})}(f+' input[name="credit_card_number"]'),function(e){e&&v()(e).on("keyup",function(e){var t=e.target,r=e.which,o=t;8===r&&/.*(\/)$/.test(t.value)?o.value=t.value.slice(0,-1):t.value.length>4?o.value=t.value.slice(0,5):8!==r&&(o.value=t.value.replace(/^([1-9]\/|[2-9])$/g,"0$1/").replace(/^(0[1-9]|1[0-2])$/g,"$1/").replace(/^([0-1])([3-9])$/g,"0$1/$2").replace(/^(0[1-9]|1[0-2])([0-9]{2})$/g,"$1/$2").replace(/^([0]+)\/|[0]+$/g,"0").replace(/[^\d\/]|^[\/]*$/g,"").replace(/\/\//g,"/"))})}(f+' input[name="expiration"]'),h.add(p),e.on("submit",function(r){if(r.preventDefault(),h.performCheck(),h.areAll("valid")){var o=i()(e.serializeArray(),function(e,t){var r=e;return r[t.name]=t.value,r},{}),n=a()(t.context.countries,function(e){return e.value===o.country}),d=n&&a()(n.states,function(e){return e.value===o.state});o.country_code=n?n.code:o.country,o.state_or_province_code=d?d.code:o.state,o.default_instrument=!!o.default_instrument,l=t.context,s=o,c=function(){window.location.href=t.context.paymentMethodsUrl},u=function(){g.A.fire({text:t.context.generic_error,icon:"error"})},f=l.paymentsUrl,y=l.shopperId,x=l.storeHash,_=l.vaultToken,C=s.provider_id,k=s.currency_code,w=s.credit_card_number,A=s.expiration,V=s.name_on_card,M=s.cvv,$=s.default_instrument,D=s.address1,P=s.address2,H=s.city,q=s.postal_code,S=s.state_or_province_code,I=s.country_code,L=s.company,E=s.first_name,j=s.last_name,N=s.email,R=s.phone,T=A.split("/"),v().ajax({url:f+"/stores/"+x+"/customers/"+y+"/stored_instruments",dataType:"json",method:"POST",cache:!1,headers:{Authorization:_,Accept:"application/vnd.bc.v1+json","Content-Type":"application/vnd.bc.v1+json"},data:JSON.stringify({instrument:{type:"card",cardholder_name:V,number:b().card.parse(w),expiry_month:b().expiration.month.parse(T[0]),expiry_year:b().expiration.year.parse(T[1],!0),verification_value:M},billing_address:(m={address1:D,address2:P,city:H,postal_code:q,state_or_province_code:S,country_code:I,company:L,first_name:E,last_name:j,email:N,phone:R},p=m,v().each(p,function(e,t){null!==t&&""!==t||delete p[e]}),p),provider_id:C,default_instrument:$,currency_code:k})}).done(c).fail(u)}var l,s,c,u,m,p,f,y,x,_,C,k,w,A,V,M,$,D,P,H,q,S,I,L,E,j,N,R,T})},n.registerEditAccountValidation=function(e){var t=(0,c.A)(e,this.context),r="form[data-edit-account-form]",o=(0,l.A)({submit:'${formEditSelector} input[type="submit"]',delay:900}),a=r+' [data-field-type="EmailAddress"]',n=x(a),i=r+' [data-field-type="Password"]',d=x(i),s=r+' [data-field-type="ConfirmPassword"]',u=x(s),p=r+' [data-field-type="CurrentPassword"]',f=x(p);if(o.add(t),n&&(o.remove(a),m.k0.setEmailValidation(o,a,this.validationDictionary.valid_email)),d&&u){var v=this.validationDictionary,h=v.password,b=v.password_match;o.remove(i),o.remove(s),m.k0.setPasswordValidation(o,i,s,this.passwordRequirements,(0,m.pt)(h,h,b,this.passwordRequirements.error),!0)}f&&o.add({selector:p,validate:function(e,t){var r=!0;""===t&&""!==d.val()&&(r=!1),e(r)},errorMessage:this.context.currentPassword}),o.add([{selector:r+" input[name='account_firstname']",validate:function(e,t){e(t.length)},errorMessage:this.context.firstName},{selector:r+" input[name='account_lastname']",validate:function(e,t){e(t.length)},errorMessage:this.context.lastName}]),e.on("submit",function(e){o.performCheck(),o.areAll("valid")||(e.preventDefault(),setTimeout(function(){x("span.form-inlineMessage:first").prev("input").focus()},900))})},n.registerInboxValidation=function(e){var t=(0,l.A)({submit:'form[data-inbox-form] input[type="submit"]',delay:900});t.add([{selector:'form[data-inbox-form] select[name="message_order_id"]',validate:function(e,t){e(0!==Number(t))},errorMessage:this.context.enterOrderNum},{selector:'form[data-inbox-form] input[name="message_subject"]',validate:function(e,t){e(t.length)},errorMessage:this.context.enterSubject},{selector:'form[data-inbox-form] textarea[name="message_content"]',validate:function(e,t){e(t.length)},errorMessage:this.context.enterMessage}]),e.on("submit",function(e){t.performCheck(),t.areAll("valid")||(e.preventDefault(),setTimeout(function(){x("span.form-inlineMessage:first").prev("input").focus()},900))})},t}(d.A)}}]);
//# sourceMappingURL=theme-bundle.chunk.938.js.map
